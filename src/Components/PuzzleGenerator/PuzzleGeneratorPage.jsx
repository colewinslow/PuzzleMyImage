import React, { useState, useEffect } from "react";
import PuzzleEditor from "./PuzzleEditor/PuzzleEditor";
import Rectangle from "./TestImages/Rectangle.png";
import Rectangle1 from "./TestImages/Rectangle1.png";
import Rectangle2 from "./TestImages/Rectangle2.png";
import Rectangle3 from "./TestImages/Rectangle3.png";

export default function PuzzleGeneratorPage() {
  const [Image, setImage] = useState();

  function onImageChange(e) {
    setImage(URL.createObjectURL(e.target.files[0]));
  }
  function ScrollToTopOnMount() {
    useEffect(() => {
      window.scrollTo(0, 0);
    }, []);

    return null;
  }

  return (
    <div className="page">
      <ScrollToTopOnMount />
      {Image ? (
        <PuzzleEditor ImgState={setImage} PuzzleImg={Image} />
      ) : (
        <>
          {" "}
          <h1 className="title">
            Upload an image to create your custom puzzle
          </h1>
          <div className="upload-box">
            <div className="upload-info">
              <svg
                className="upload-puzzle-svg"
                viewBox="0 0 116 114"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0 56.9983L17.7994 74.4951C16.6347 75.1762 15.5068 75.9583 14.4979 76.9498C12.9701 78.4445 11.7577 80.221 10.9305 82.1778C10.1032 84.1341 9.67736 86.2321 9.67736 88.3506C9.67736 90.4692 10.1032 92.5671 10.9305 94.5235C11.7577 96.4802 12.9701 98.2567 14.4979 99.7515C16.0188 101.253 17.8265 102.445 19.8173 103.258C21.808 104.071 23.9426 104.489 26.0984 104.489C28.2541 104.489 30.3887 104.071 32.3794 103.258C34.3702 102.445 36.1778 101.253 37.6989 99.7515C38.7077 98.76 39.5032 97.6559 40.2005 96.5069L57.9998 114L75.7995 96.5069C74.5991 95.8278 73.4909 95.0018 72.5019 94.0482C70.9748 92.5538 69.7628 90.7773 68.936 88.8209C68.1092 86.8649 67.6834 84.7676 67.6834 82.6497C67.6834 80.5315 68.1092 78.4335 68.936 76.4775C69.7628 74.5214 70.9748 72.7453 72.5019 71.2508C74.0227 69.7497 75.8302 68.5587 77.8208 67.7461C79.811 66.9334 81.9449 66.5151 84.1003 66.5151C86.2557 66.5151 88.3896 66.9334 90.3802 67.7461C92.3704 68.5587 94.1779 69.7497 95.6988 71.2508C96.6689 72.224 97.5093 73.3141 98.2007 74.4951L116 57.002L98.2007 39.5045C99.3654 38.8194 100.493 38.0374 101.502 37.0459C103.029 35.5515 104.241 33.7753 105.068 31.8192C105.895 29.8631 106.32 27.7654 106.32 25.6472C106.32 23.529 105.895 21.4318 105.068 19.4757C104.241 17.5196 103.029 15.743 101.502 14.2484C99.9811 12.7468 98.1736 11.5557 96.1827 10.7427C94.1918 9.92965 92.0572 9.51114 89.9015 9.51114C87.7458 9.51114 85.6112 9.92965 83.6207 10.7427C81.6298 11.5557 79.8222 12.7468 78.3011 14.2484C77.2923 15.2359 76.4965 16.3446 75.7995 17.4933L57.9998 0L40.2005 17.4933C41.3695 18.1745 42.493 18.9565 43.4978 19.948C45.0259 21.4427 46.2382 23.2193 47.0653 25.1758C47.8925 27.1323 48.3186 29.2301 48.3186 31.3488C48.3186 33.4675 47.8925 35.5651 47.0653 37.5218C46.2382 39.4782 45.0259 41.2547 43.4978 42.7495C41.977 44.2506 40.1698 45.4416 38.1792 46.2543C36.189 47.0669 34.0547 47.4852 31.8996 47.4852C29.7443 47.4852 27.6102 47.0669 25.6198 46.2543C23.6295 45.4416 21.822 44.2506 20.3012 42.7495C19.3311 41.7763 18.4905 40.6859 17.7994 39.5045L0 56.9983Z"
                  fill="#DDDFE1"
                />
              </svg>{" "}
              <button className="upload-image-btn">
                <svg
                  width="22"
                  height="20"
                  viewBox="0 0 22 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M20.5873 13.1549V17.037C20.5873 17.5518 20.3598 18.0456 19.9547 18.4096C19.5497 18.7736 19.0003 18.9781 18.4274 18.9781H3.30831C2.73548 18.9781 2.18611 18.7736 1.78105 18.4096C1.376 18.0456 1.14844 17.5518 1.14844 17.037V13.1549"
                    stroke="white"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M16.2676 6.36121L10.868 1.50854L5.46826 6.36121"
                    stroke="white"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M10.8677 1.50854V13.1549"
                    stroke="white"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>
                <input
                  type="file"
                  multiple
                  accept="image/*"
                  onChange={onImageChange}
                />
                Upload Image
              </button>
              <span className="drop-file-text">or drop a file</span>
            </div>
            <div className="upload-cmd-instruction">
              <p>Paste Image or URL</p>
              <div className="upload-instructions-set">
                <span className="upload-instruction">cmd</span>+<span>v</span>
              </div>
            </div>
          </div>
          <div className="upload-test-images-container">
            <div
              onClick={() => setImage((prev) => (prev = Rectangle))}
              className="upload-test-image"
            >
              <img alt="Leaf" src={Rectangle} />
            </div>{" "}
            <div
              onClick={() => setImage((prev) => (prev = Rectangle1))}
              className="upload-test-image"
            >
              <img alt="Dog" src={Rectangle1} />
            </div>{" "}
            <div
              onClick={() => setImage((prev) => (prev = Rectangle3))}
              className="upload-test-image"
            >
              <img alt="Dog" src={Rectangle3} />
            </div>{" "}
            <div
              className="upload-test-image"
              onClick={() => setImage((prev) => (prev = Rectangle2))}
            >
              <img alt="Family" src={Rectangle2} />
            </div>{" "}
            <div className="upload-test-image disabled">
              <svg
                viewBox="0 0 143 166"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_153_2)">
                  <rect
                    x="24"
                    y="22"
                    width="94.7526"
                    height="117.102"
                    fill="#222222"
                  />
                </g>
                <path
                  d="M48.525 82.525C48.525 84.725 48 86.255 46.95 87.115C46.52 87.455 46.055 87.69 45.555 87.82C45.055 87.94 44.4 88 43.59 88H39.705L39.57 87.175C40.33 86.895 40.75 86.75 40.83 86.74C40.83 86.71 40.785 84.065 40.695 78.805C40.255 78.695 39.84 78.565 39.45 78.415C39.51 77.895 39.55 77.59 39.57 77.5H43.545C44.525 77.5 45.305 77.6 45.885 77.8C46.475 78 46.995 78.355 47.445 78.865C48.165 79.705 48.525 80.925 48.525 82.525ZM43.725 86.545C44.865 86.545 45.62 86.27 45.99 85.72C46.37 85.17 46.56 84.22 46.56 82.87C46.56 81.52 46.35 80.54 45.93 79.93C45.51 79.31 44.81 79 43.83 79H42.735C42.695 82.37 42.67 84.885 42.66 86.545H43.725ZM56.7899 77.665L56.8049 77.815C56.8049 78.225 56.7399 78.575 56.6099 78.865C56.4799 78.965 56.2749 79.045 55.9949 79.105L58.4999 86.515L59.9249 86.695C59.9249 87.105 59.8099 87.54 59.5799 88H55.9349L55.7999 87.175C56.2199 87.015 56.4949 86.91 56.6249 86.86L56.0249 85.165H52.6499C52.3499 86.055 52.1899 86.52 52.1699 86.56L53.2049 86.695C53.2049 86.905 53.1649 87.15 53.0849 87.43C53.0049 87.7 52.9299 87.89 52.8599 88H49.2149L49.0799 87.175C49.5299 86.985 49.9349 86.845 50.2949 86.755L52.8149 79.045C52.1449 78.945 51.6399 78.815 51.2999 78.655C51.2999 78.365 51.3449 78.11 51.4349 77.89C51.6449 77.82 52.1349 77.74 52.9049 77.65C53.6849 77.55 54.4249 77.5 55.1249 77.5C55.8349 77.5 56.3899 77.555 56.7899 77.665ZM54.8549 81.79L54.4199 79.81H54.2699L53.7899 81.88L53.0849 83.755H55.5899L54.8549 81.79ZM67.0988 85.27C67.3388 85.23 67.5188 85.21 67.6388 85.21C67.7688 85.21 68.0438 85.245 68.4638 85.315C68.5038 85.395 68.5588 85.65 68.6288 86.08C68.7088 86.51 68.7488 86.86 68.7488 87.13C68.7488 87.39 68.7188 87.68 68.6588 88H61.3838L61.2488 87.175C61.7388 86.975 62.1588 86.83 62.5088 86.74C62.5088 86.71 62.4638 84.065 62.3738 78.805L61.1288 78.415L61.2488 77.5H65.1488C65.1388 77.5 65.1388 77.51 65.1488 77.53C65.1688 77.55 65.1888 77.595 65.2088 77.665C65.2388 77.725 65.2688 77.8 65.2988 77.89C65.3588 78.05 65.3988 78.315 65.4188 78.685C64.9088 78.765 64.5738 78.815 64.4138 78.835C64.3738 82.285 64.3488 84.86 64.3388 86.56H66.7688L67.0988 85.27ZM75.9757 85.27C76.2157 85.23 76.3957 85.21 76.5157 85.21C76.6457 85.21 76.9207 85.245 77.3407 85.315C77.3807 85.395 77.4357 85.65 77.5057 86.08C77.5857 86.51 77.6257 86.86 77.6257 87.13C77.6257 87.39 77.5957 87.68 77.5357 88H70.2607L70.1257 87.175C70.6157 86.975 71.0357 86.83 71.3857 86.74C71.3857 86.71 71.3407 84.065 71.2507 78.805L70.0057 78.415L70.1257 77.5H74.0257C74.0157 77.5 74.0157 77.51 74.0257 77.53C74.0457 77.55 74.0657 77.595 74.0857 77.665C74.1157 77.725 74.1457 77.8 74.1757 77.89C74.2357 78.05 74.2757 78.315 74.2957 78.685C73.7857 78.765 73.4507 78.815 73.2907 78.835C73.2507 82.285 73.2257 84.86 73.2157 86.56H75.6457L75.9757 85.27ZM80.6677 86.095C80.7577 86.455 80.8027 86.765 80.8027 87.025C80.8027 87.275 80.7877 87.56 80.7577 87.88C80.4177 87.97 80.0927 88.015 79.7827 88.015C79.4727 88.015 79.1327 88 78.7627 87.97C78.6627 87.57 78.6127 87.28 78.6127 87.1C78.6127 86.91 78.6327 86.605 78.6727 86.185C79.0027 86.095 79.3177 86.05 79.6177 86.05C79.9277 86.05 80.2777 86.065 80.6677 86.095ZM84.7028 79C84.7028 80.14 84.6928 81.12 84.6728 81.94H86.2028L86.3528 80.905C86.8628 80.905 87.3578 81.03 87.8378 81.28V84.28L86.8478 84.325C86.6078 83.965 86.4678 83.65 86.4278 83.38H84.6578C84.6378 84.78 84.6278 85.835 84.6278 86.545H87.1928L87.5228 85.24C88.1428 85.24 88.6128 85.27 88.9328 85.33C89.0828 85.9 89.1578 86.42 89.1578 86.89C89.1578 87.35 89.1428 87.72 89.1128 88H81.6728L81.5378 87.175C82.1878 86.925 82.6078 86.78 82.7978 86.74C82.7878 86.15 82.7778 85.32 82.7678 84.25C82.7278 81.85 82.6928 80.035 82.6628 78.805L81.4178 78.415L81.5378 77.5H88.9028C88.9328 77.77 88.9478 78.11 88.9478 78.52C88.9478 78.92 88.8728 79.48 88.7228 80.2C88.4128 80.3 87.9428 80.35 87.3128 80.35L86.9678 79H84.7028ZM97.1252 81.18L96.4052 81.2C96.1652 81.2 95.7785 81.1533 95.2452 81.06C94.9918 80.3667 94.8585 79.4933 94.8452 78.44C95.2052 78.08 95.7185 77.7467 96.3852 77.44C97.0652 77.12 97.7052 76.96 98.3052 76.96C99.5318 76.96 100.518 77.2733 101.265 77.9C102.025 78.5267 102.405 79.2533 102.405 80.08C102.405 80.9067 102.225 81.6333 101.865 82.26C101.505 82.8867 100.865 83.6 99.9452 84.4L97.8452 86.22H100.025C100.172 85.1667 100.265 84.5733 100.305 84.44C100.465 84.4133 100.712 84.4 101.045 84.4C101.378 84.4 101.725 84.4733 102.085 84.62C102.272 85.5533 102.365 86.4467 102.365 87.3L102.345 88H95.0452C94.8185 87.52 94.7052 87.0067 94.7052 86.46C97.6118 83.66 99.2118 82 99.5052 81.48C99.6785 81.1733 99.7652 80.7267 99.7652 80.14C99.7652 79.82 99.6318 79.5067 99.3652 79.2C99.0985 78.8933 98.6918 78.74 98.1452 78.74C97.8918 78.74 97.7052 78.7467 97.5852 78.76C97.5185 79.0533 97.4318 79.5 97.3252 80.1C97.2185 80.6867 97.1518 81.0467 97.1252 81.18Z"
                  fill="white"
                />
                <defs>
                  <filter
                    id="filter0_d_153_2"
                    x="0"
                    y="0"
                    width="142.752"
                    height="165.102"
                    filterUnits="userSpaceOnUse"
                    colorInterpolationFilters="sRGB"
                  >
                    <feFlood floodOpacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feOffset dy="2" />
                    <feGaussianBlur stdDeviation="12" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.21 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_153_2"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_153_2"
                      result="shape"
                    />
                  </filter>
                </defs>
              </svg>
              <span className="coming-soon">Coming Soon</span>
            </div>
          </div>
        </>
      )}
    </div>
  );
}
